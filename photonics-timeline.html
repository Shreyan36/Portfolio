<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Shreyan • Photonics Timeline</title>
<meta name="description" content="A photonics-inspired interactive timeline: waveguides, plasmon resonances, and SEM aesthetics." />

<style>
  :root{
    --bg:#0b1020;           /* dark lab */
    --panel:#10162a;
    --text:#e6ecff;
    --muted:#a8b3cf;
    --origin:#14b8a6;       /* teal */
    --study:#60a5fa;        /* blue */
    --work:#f59e0b;         /* amber */
    --plasmon:#c084fc;      /* violet aura */
    --pulse:#22d3ee;        /* cyan photon */
    --accent:#8b5cf6;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);
    font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial; overflow:hidden}

  /* ====== Background stack: SEM scanline + metasurface lattice + noise ====== */
  .stage{
    position:fixed; inset:0; overflow:hidden; background: radial-gradient(1200px 700px at 20% 80%, #11193a 0%, #0b1020 60%, #090e1c 100%);
  }
  /* metasurface: subtle diamond lattice */
  .lattice{
    position:absolute; inset:0; opacity:.18;
    background:
      linear-gradient(135deg, rgba(255,255,255,.08) 8%, transparent 8%) 0 0/22px 22px,
      linear-gradient(315deg, rgba(255,255,255,.08) 8%, transparent 8%) 0 0/22px 22px;
    transform: scale(1.3) rotate(0.0001deg); /* nudge for crispness */
  }
  /* SEM scanline sweep */
  .scan{
    position:absolute; inset:-40% -10% 0 -10%;
    background: linear-gradient(180deg, transparent 0%, rgba(255,255,255,.05) 2%, transparent 4%);
    animation: sweep 6s linear infinite;
    mix-blend-mode: screen; opacity:.3;
  }
  @keyframes sweep{
    0%{ transform: translateY(-40%); }
    100%{ transform: translateY(140%); }
  }
  /* film grain */
  .noise{
    position:absolute; inset:0; opacity:.06; pointer-events:none; mix-blend-mode:screen;
    background-image: url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160">\
<filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter>\
<rect width="100%" height="100%" filter="url(%23n)" opacity="0.8"/>\
</svg>');
    background-size: 220px 220px;
    animation: jitter 1.8s steps(2,end) infinite;
  }
  @keyframes jitter{ 50%{ transform: translate3d(0,0,0) scale(1.01);} }

  /* ====== UI: legend + bottom card ====== */
  .legend{
    position:fixed; top:12px; right:12px; z-index:5;
    display:flex; gap:12px; padding:8px 12px;
    background:rgba(16,22,42,.6); border:1px solid rgba(255,255,255,.08);
    border-radius:14px; backdrop-filter: blur(8px);
  }
  .lg{display:flex; align-items:center; gap:6px; color:var(--muted)}
  .dot{width:10px; height:10px; border-radius:50%}
  .card{
    position:fixed; left:16px; bottom:16px; z-index:5; width:min(560px,calc(100% - 32px));
    background:rgba(16,22,42,.85); border:1px solid rgba(255,255,255,.08); border-radius:16px;
    padding:14px 16px; backdrop-filter: blur(8px)
  }
  .row{display:flex;align-items:center;gap:10px;margin-bottom:6px}
  .h{font-weight:700;margin:0}
  .t{color:#cfe0ff;margin:4px 0 8px}
  .d{color:var(--muted)}
  .controls{display:flex;gap:10px;margin-top:10px}
  .btn{background:#1b2442;color:#e6eaff;border:1px solid rgba(255,255,255,.08);
       padding:8px 14px;border-radius:12px;cursor:pointer}
  .btn.primary{background:linear-gradient(135deg,#6d28d9,#8b5cf6);border:0}
  .btn:disabled{opacity:.5;cursor:not-allowed}

  /* ====== SVG timeline (full screen) ====== */
  svg{ position:absolute; inset:0; width:100%; height:100% }
  .waveguide{ fill:none; stroke:rgba(160,176,255,.5); stroke-width:2; filter:url(#glow) }
  .photon{ fill:var(--pulse); filter:url(#photonGlow)}
  /* Node = plasmon resonance: core + halo ring + subtle oscillation */
  .nodeGroup{ cursor:pointer }
  .nodeCore{ fill:#0f172a; stroke-width:2; }
  .nodeHalo{ fill:none; stroke:var(--plasmon); stroke-opacity:.8; }
  .nodeGroup:hover .nodeHalo{ stroke-width:10; stroke-opacity:1 }
  .nodePulse{
    fill: radial-gradient(circle at center, rgba(192,132,252,.9), rgba(192,132,252,0) 70%);
  }

  /* Tooltip near node */
  .tooltip{
    position:absolute; z-index:6; pointer-events:none; display:none;
    background:rgba(16,22,42,.92); color:#eaf2ff; border:1px solid rgba(255,255,255,.1);
    padding:10px 12px; border-radius:12px; max-width:320px; box-shadow: 0 18px 60px rgba(0,0,0,.45);
  }
  .tooltip .ttl{ font-weight:700; margin-bottom:4px }
  .tooltip .sub{ color:#cfe0ff; margin-bottom:6px }
  .tooltip .mini{ color:var(--muted) }

  /* Big gallery overlay */
  .gallery{position:fixed;z-index:7;display:none;width:min(980px,96vw);
           background:rgba(16,22,42,.98);border:1px solid rgba(255,255,255,.1);
           border-radius:16px;overflow:hidden;box-shadow:0 18px 60px rgba(0,0,0,.55)}
  .galleryHeader{display:flex;align-items:center;justify-content:space-between;
                 padding:10px 14px;border-bottom:1px solid rgba(255,255,255,.08)}
  .galleryTitle{font-weight:600}
  .galleryClose{cursor:pointer;background:transparent;border:0;color:#fff;font-size:20px}
  .galleryViewport{position:relative;width:100%;height:min(600px,64vh);background:#0a0f1e}
  .galleryImg{position:absolute;inset:0;display:none;width:100%;height:100%;object-fit:cover}
  .galleryImg.active{display:block}
  .navBtn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.45);
          border:1px solid rgba(255,255,255,.2);color:#fff;border-radius:10px;padding:8px 10px;cursor:pointer}
  .navPrev{left:10px} .navNext{right:10px}
  .galleryCaption{padding:10px 14px;color:#dbe7ff;border-top:1px solid rgba(255,255,255,.08)}

  /* Tiny “plasmon shimmer” animation on halo */
  .haloAnim{ animation: halo 2.6s ease-in-out infinite }
  @keyframes halo{
    0%,100%{ stroke-dasharray:6 10; stroke-opacity:.65 }
    50%{    stroke-dasharray:14 8; stroke-opacity:1   }
  }
</style>
</head>
<body>
<div class="stage" aria-label="Photonics timeline stage">
  <div class="lattice"></div>
  <div class="scan"></div>
  <div class="noise"></div>

  <!-- Legend -->
  <div class="legend" role="note">
    <div class="lg"><span class="dot" style="background:var(--origin)"></span>Origin</div>
    <div class="lg"><span class="dot" style="background:var(--study)"></span>Study</div>
    <div class="lg"><span class="dot" style="background:var(--work)"></span>Work</div>
  </div>

  <!-- Bottom info card -->
  <div class="card" role="region" aria-live="polite">
    <div class="row">
      <div id="typeDot" class="dot" style="background:var(--origin)"></div>
      <div id="title" class="h">Birth • Burdwan, India</div>
    </div>
    <div id="subtitle" class="t">Starting point of the journey.</div>
    <div id="desc" class="d">Hover a resonance to preview, click to open gallery. Use Next to propagate the photon to the next node.</div>
    <div class="controls">
      <button id="prev" class="btn">Prev</button>
      <button id="next" class="btn primary">Next</button>
    </div>
  </div>

  <!-- Tooltip -->
  <div id="tooltip" class="tooltip" role="tooltip" aria-hidden="true">
    <div class="ttl">Title</div>
    <div class="sub">Subtitle</div>
    <div class="mini">Click to open gallery</div>
  </div>

  <!-- SVG Timeline -->
  <svg viewBox="0 0 1600 900" preserveAspectRatio="none" aria-label="Photonics timeline SVG">
    <defs>
      <!-- Glow filters -->
      <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
        <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
        <feMerge>
          <feMergeNode in="coloredBlur"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
      <filter id="photonGlow" x="-50%" y="-50%" width="200%" height="200%">
        <feGaussianBlur stdDeviation="3" result="g1"/>
        <feMerge>
          <feMergeNode in="g1"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>

    <!-- Waveguide path (drawn by JS) -->
    <path id="wave" class="waveguide" d="" />
    <!-- Photon -->
    <circle id="photon" class="photon" r="7" cx="-20" cy="-20"/>
    <!-- Nodes injected here -->
    <g id="nodes"></g>
  </svg>

  <!-- Big Gallery -->
  <div id="gallery" class="gallery" role="dialog" aria-modal="true" aria-label="Image gallery">
    <div class="galleryHeader">
      <div class="galleryTitle" id="gTitle">Location</div>
      <button class="galleryClose" id="gClose" aria-label="Close">×</button>
    </div>
    <div class="galleryViewport" id="gViewport">
      <button class="navBtn navPrev" id="gPrev" aria-label="Previous">‹</button>
      <button class="navBtn navNext" id="gNext" aria-label="Next">›</button>
    </div>
    <div class="galleryCaption" id="gCaption">Caption</div>
  </div>
</div>

<script>
/* ===================== Data ===================== */
function imgPlaceholder(label, a,b){
  const svg = encodeURIComponent(
`<svg xmlns='http://www.w3.org/2000/svg' width='1600' height='900'>
  <defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
    <stop offset='0%' stop-color='${a}'/><stop offset='100%' stop-color='${b}'/></linearGradient></defs>
  <rect width='100%' height='100%' fill='url(#g)'/>
  <g opacity='.08'><circle cx='800' cy='450' r='230' fill='#fff'/></g>
  <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle'
        font-family='system-ui,Arial' font-size='46' fill='rgba(255,255,255,0.95)'>${label}</text>
</svg>`);
  return `data:image/svg+xml;charset=utf-8,${svg}`;
}

const steps = [
  { id:'birth',   type:'origin', title:'Birth • Burdwan, India',
    subtitle:'Starting point of the journey.',
    desc:'Burdwan (Bardhaman), West Bengal — early roots and curiosity.',
    gallery:[imgPlaceholder('Burdwan • early roots','#0ea5e9','#1e3a8a'), imgPlaceholder('Hometown memories','#38bdf8','#0e7490')] },

  { id:'school',  type:'origin', title:'School • Burdwan, India',
    subtitle:'Early education.',
    desc:'Formative years — first sparks of science and tinkering.',
    gallery:[imgPlaceholder('School years • curiosity','#22c55e','#0f766e'), imgPlaceholder('First circuits & demos','#34d399','#065f46')] },

  { id:'nit',     type:'study',  title:'Undergrad • NIT Durgapur',
    subtitle:'B.Tech, Electronics & Communication (2017–2021)',
    desc:'Leadership in placements & student bodies; foundations in ECE and photonics.',
    gallery:[imgPlaceholder('NIT Durgapur campus','#f59e0b','#b45309'), imgPlaceholder('ECE • projects','#fbbf24','#92400e')] },

  { id:'iisc',    type:'work',   title:'Summer Research Intern • IISc Bangalore',
    subtitle:'Optical communications & modulators (May–Jul 2019)',
    desc:'Explored optical components; simulated MZMs; proposed an optical full adder (IEEE).',
    gallery:[imgPlaceholder('IISc • research summer','#ef4444','#7f1d1d'), imgPlaceholder('Optical systems & MZMs','#fb7185','#7f1d1d')] },

  { id:'uky',     type:'work',   title:'Visiting Research Scholar • University of Kentucky',
    subtitle:'CMOS-integrated nanophotonic ALU (May 2020–May 2021)',
    desc:'Polymorphic ALU at 14nm & 45/32nm SiP; DFM-aware logic; ~70% latency ↓ and ~30% frequency ↑.',
    gallery:[imgPlaceholder('Lexington • photonics work','#8b5cf6','#4c1d95'), imgPlaceholder('CMOS + SiP modeling','#a78bfa','#4338ca')] },

  { id:'ubms',    type:'study',  title:'M.S. • University at Buffalo',
    subtitle:'Electrical Engineering (2019–2023)',
    desc:'GPA 3.89/4.0 — Core grounding ahead of Ph.D.',
    gallery:[imgPlaceholder('Buffalo • MS journey','#60a5fa','#1e40af'), imgPlaceholder('Labs & coursework','#93c5fd','#1d4ed8')] },

  { id:'ubphd',   type:'study',  title:'Ph.D. • University at Buffalo',
    subtitle:'Nanophotonics & Biosensing (Aug 2021–Jan 2026)',
    desc:'3-step SERS fabrication (E-beam evap, RTA, liquid Ga); >85% cost ↓; >100× Raman enhancement.',
    gallery:[imgPlaceholder('SERS sensors • research','#14b8a6','#0f766e'), imgPlaceholder('Characterization & results','#2dd4bf','#115e59')] },

  { id:'metalenz',type:'work',   title:'SEM Imaging & Process Intern • Boston, USA',
    subtitle:'Meta-optics internship (May–Aug 2025)',
    desc:'SEM pipelines; 96–98.5% feature accuracy; 500+ images (~1.36 min/image); DOE & SPC; ~30% faster insights.',
    gallery:[imgPlaceholder('Boston • internship','#ef4444','#7f1d1d'), imgPlaceholder('SEM workflows & DOE','#fb7185','#7f1d1d')] },
];

const typeColor = t => t==='origin' ? getVar('--origin') : t==='study' ? getVar('--study') : getVar('--work');
function getVar(n){ return getComputedStyle(document.documentElement).getPropertyValue(n).trim(); }

/* ===================== Build the SVG waveguide path ===================== */
const svg = document.querySelector('svg');
const wave = document.getElementById('wave');
const nodesG = document.getElementById('nodes');
const photon = document.getElementById('photon');
const W = 1600, H = 900;
const marginX = 120, topY=250, bottomY=650;

/* We lay nodes across X and make a gentle sinusoidal Y to feel like a plasmonic mode. */
const n = steps.length;
const points = [];
for(let i=0;i<n;i++){
  const t = i/(n-1);                         // 0..1
  const x = marginX + t*(W - marginX*2);
  const y = H/2 + Math.sin(t*Math.PI*2)* (H*0.18); // smooth wave
  points.push({x,y});
}

/* Build a smooth cubic Bézier path through those points */
function pathThrough(pts){
  if(!pts.length) return '';
  let d = `M ${pts[0].x},${pts[0].y}`;
  for(let i=0;i<pts.length-1;i++){
    const p0 = pts[i], p1 = pts[i+1];
    const dx = (p1.x - p0.x) * 0.35;
    d += ` C ${p0.x+dx},${p0.y} ${p1.x-dx},${p1.y} ${p1.x},${p1.y}`;
  }
  return d;
}
wave.setAttribute('d', pathThrough(points));

/* Position nodes exactly on the path using getPointAtLength */
const totalLen = wave.getTotalLength();
const nodeLen = points.map((_,i)=> totalLen * (i/(n-1)));  // lengths along path
const nodePos = nodeLen.map(L => wave.getPointAtLength(L));

/* Draw nodes */
steps.forEach((s,i)=>{
  const p = nodePos[i];
  const g = document.createElementNS('http://www.w3.org/2000/svg','g');
  g.setAttribute('class','nodeGroup');
  g.setAttribute('transform', `translate(${p.x},${p.y})`);
  g.dataset.index = i;

  // halo ring
  const halo = document.createElementNS('http://www.w3.org/2000/svg','circle');
  halo.setAttribute('class','nodeHalo haloAnim');
  halo.setAttribute('r','16');
  halo.setAttribute('stroke', getVar('--plasmon'));
  halo.setAttribute('stroke-width','6');
  halo.setAttribute('fill','none');
  halo.setAttribute('opacity','0.9');
  g.appendChild(halo);

  // colored core
  const core = document.createElementNS('http://www.w3.org/2000/svg','circle');
  core.setAttribute('class','nodeCore');
  core.setAttribute('r','8');
  core.setAttribute('stroke', typeColor(s.type));
  core.setAttribute('fill', '#0b1020');
  g.appendChild(core);

  nodesG.appendChild(g);
});

/* ===================== Photon animation & step control ===================== */
const elTypeDot = document.getElementById('typeDot');
const elTitle   = document.getElementById('title');
const elSub     = document.getElementById('subtitle');
const elDesc    = document.getElementById('desc');
const btnPrev   = document.getElementById('prev');
const btnNext   = document.getElementById('next');
const tip       = document.getElementById('tooltip');

let idx = 0;
let animReq = null;

function updateCard(s){
  elTypeDot.style.background = typeColor(s.type);
  elTitle.textContent = s.title;
  elSub.textContent   = s.subtitle;
  elDesc.textContent  = s.desc;
}
function placePhotonAtIndex(i){
  const p = nodePos[i];
  photon.setAttribute('cx', p.x);
  photon.setAttribute('cy', p.y);
}
function setStep(i, options={}){
  idx = Math.max(0, Math.min(steps.length-1, i));
  btnPrev.disabled = idx===0;
  btnNext.disabled = idx===steps.length-1;
  updateCard(steps[idx]);
  if(options.instant) placePhotonAtIndex(idx);
  else animatePhoton(nodeLen[idx]);
}
function animatePhoton(targetLen){
  cancelAnimationFrame(animReq);
  const cur = currentPhotonLen();
  const start = performance.now();
  const duration = 1200; // ms

  function frame(t){
    const k = Math.min(1, (t-start)/duration);
    const eased = 0.5 - Math.cos(k*Math.PI)/2; // easeInOut
    const L = cur + (targetLen - cur)*eased;
    const pt = wave.getPointAtLength(L);
    photon.setAttribute('cx', pt.x);
    photon.setAttribute('cy', pt.y);
    if(k<1) animReq = requestAnimationFrame(frame);
  }
  animReq = requestAnimationFrame(frame);
}
function currentPhotonLen(){
  const cx = parseFloat(photon.getAttribute('cx')||'-20');
  const cy = parseFloat(photon.getAttribute('cy')||'-20');
  if(cx < 0) return 0; // start
  // rough search for closest length (quick coarse → fine)
  let bestL = 0, bestD = Infinity;
  for(let L=0; L<=totalLen; L+= totalLen/120){
    const p = wave.getPointAtLength(L);
    const d = (p.x-cx)*(p.x-cx)+(p.y-cy)*(p.y-cy);
    if(d<bestD){ bestD=d; bestL=L; }
  }
  return bestL;
}
btnPrev.onclick = ()=> setStep(idx-1);
btnNext.onclick = ()=> setStep(idx+1);
setStep(0, {instant:true});

/* ===================== Tooltip + Gallery ===================== */
function showTip(texts, x, y){
  tip.style.left = Math.min(Math.max(8, x+12), innerWidth-340) + 'px';
  tip.style.top  = Math.min(Math.max(8, y-10), innerHeight-120) + 'px';
  tip.querySelector('.ttl').textContent = texts.title;
  tip.querySelector('.sub').textContent = texts.subtitle;
  tip.style.display = 'block';
}
function hideTip(){ tip.style.display='none'; }

nodesG.querySelectorAll('.nodeGroup').forEach(g=>{
  g.addEventListener('mousemove', (e)=>{
    const i = +g.dataset.index;
    const s = steps[i];
    showTip({title:s.title, subtitle:s.subtitle}, e.clientX, e.clientY);
  });
  g.addEventListener('mouseleave', hideTip);
  g.addEventListener('click', ()=>{
    setStep(+g.dataset.index); // jump + animate photon
    openGallery(steps[idx]);
  });
});

/* ===================== Gallery ===================== */
const gallery = document.getElementById('gallery');
const gTitle  = document.getElementById('gTitle');
const gCaption= document.getElementById('gCaption');
const gViewport=document.getElementById('gViewport');
const gPrev   = document.getElementById('gPrev');
const gNext   = document.getElementById('gNext');
const gClose  = document.getElementById('gClose');

let gImgs = [], gIndex=0;

function openGallery(step){
  const W = Math.min(980, window.innerWidth*0.96);
  const H = Math.min(600, window.innerHeight*0.64);
  gallery.style.width = W+'px';
  gallery.style.left  = (innerWidth - W)/2 + 'px';
  gallery.style.top   = Math.max(12, (innerHeight - (H+84))/2) + 'px';

  gTitle.textContent = step.title;
  gImgs = step.gallery.slice();
  gIndex = 0;

  gViewport.querySelectorAll('img.galleryImg').forEach(n=>n.remove());
  gImgs.forEach((src, i)=>{
    const im = document.createElement('img');
    im.className = 'galleryImg' + (i===0 ? ' active':'');
    im.src = src; im.alt = step.title + ' • ' + (i+1);
    gViewport.appendChild(im);
  });
  updateCaption(step);
  gallery.style.display='block';
}
function updateCaption(step){
  gCaption.textContent = step.subtitle + (gImgs.length>1 ? `  •  ${gIndex+1}/${gImgs.length}`:'');
  const all = [...gViewport.querySelectorAll('img.galleryImg')];
  all.forEach((im, i)=> im.classList.toggle('active', i===gIndex));
}
gPrev.onclick = ()=>{ if(!gImgs.length) return; gIndex=(gIndex-1+gImgs.length)%gImgs.length; updateCaption(steps[idx]); };
gNext.onclick = ()=>{ if(!gImgs.length) return; gIndex=(gIndex+1)%gImgs.length; updateCaption(steps[idx]); };
gClose.onclick= ()=>{ gallery.style.display='none'; };

/* Close tooltip if window resizes */
addEventListener('resize', hideTip);
</script>
</body>
</html>
